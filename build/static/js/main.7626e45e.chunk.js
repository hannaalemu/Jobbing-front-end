(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{113:function(e,t,a){e.exports=a(236)},122:function(e,t){},124:function(e,t){},163:function(e,t){},164:function(e,t){},236:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),l=a(27),i=a.n(l),c=(a(118),a(16)),r=a(17),d=a(20),s=a(18),u=a(19),h=a(110),b=a.n(h),p=a(61),m=a.n(p),g=o.a.createContext(),E="https://jobbing-back-end.herokuapp.com",f="jobbingisawesome",J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).login=function(e,t,n){var o={method:"POST",mode:"cors",cache:"no-cache",headers:new Headers({Authorization:"Basic ".concat(btoa("".concat(e,":").concat(t)))})};"signup"===n&&(o.body=JSON.stringify({username:e,password:t}),o.headers=new Headers({"Content-Type":"application/json"})),fetch("".concat(E,"/").concat(n),o).then((function(e){return e.text()})).then((function(e){return a.validateToken(e)})).catch(console.error)},a.logout=function(){a.setLoginState(!1,null,{})},a.validateToken=function(e){try{var t=b.a.verify(e,f);a.setLoginState(!0,t,e)}catch(n){a.setLoginState(!1,null,{})}},a.setLoginState=function(e,t,n){m.a.save("auth",n),a.setState({token:n,loggedIn:e,user:t})},a.state={loggedIn:!1,token:null,user:{},login:a.login,logout:a.logout},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=m.a.load("auth");this.validateToken(e)}},{key:"render",value:function(){return o.a.createElement(g.Provider,{value:this.state},this.props.children)}}]),t}(o.a.Component),v=function(e){return e.condition?e.children:null},j=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=!1;try{this.props.capability&&this.context.user.capabilities.includes(this.props.capability)&&(e=!0)}catch(t){}return o.a.createElement(v,{condition:e},o.a.createElement("div",null,this.props.children))}}]),t}(o.a.Component);j.contextType=g;var w=j,D=a(42),k=function(e){return e.condition?e.children:null},y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(s.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(D.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e,t){e.preventDefault(),a.context.login(a.state.username,a.state.password,t)},a.state={username:"",password:""},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,{condition:this.context.loggedIn},o.a.createElement("button",{onClick:this.context.logout},"Log Out")),o.a.createElement(k,{condition:!this.context.loggedIn},o.a.createElement("form",null,o.a.createElement("input",{placeholder:"UserName",name:"username",onChange:this.handleChange}),o.a.createElement("input",{placeholder:"password",name:"password",type:"password",onChange:this.handleChange}),o.a.createElement("button",{onClick:function(t){return e.handleSubmit(t,"signin")}},"Sign In"),o.a.createElement("button",{onClick:function(t){return e.handleSubmit(t,"signup")}},"Sign Up"))))}}]),t}(o.a.Component);y.contextType=g;var C=y,O=a(238),A=a(246),S=a(239),M=a(240),x=a(241),T=a(242),_=a(243),L=a(244),N=a(245),I=a(34),z=a.n(I),H=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={jobs:[],newJobData:{title:"",location:"",dateApplied:""},editJobData:{_id:"",title:"",location:"",dateApplied:""},newJobModal:!1,editJobModal:!1},a.handleChangeTitle=function(e){var t=a.state.newJobData;t.title=e.target.value,a.setState({newJobData:t})},a.handleChangeLocation=function(e){var t=a.state.newJobData;t.location=e.target.value,a.setState({newJobData:t})},a.handleChangeDateApplied=function(e){var t=a.state.newJobData;t.dateApplied=e.target.value,a.setState({newJobData:t})},a.addNewJob=function(e){z.a.post("https://jobbing-back-end.herokuapp.com/api/v1/job",a.state.newJobData).then((function(e){var t=a.state.jobs;t.push(e.body),a.setState({jobs:t,newJobModal:!1,newJobData:{title:"",location:"",dateApplied:""}})}))},a.editJob=function(e,t,n,o){a.setState({editJobData:{_id:e,title:t,location:n,dateApplied:o},editJobModal:!a.state.editJobModal})},a.updateJob=function(){var e=a.state.editJobData,t=e.title,n=e.location,o=e.dateApplied;z.a.put("https://jobbing-back-end.herokuapp.com/api/v1/job/"+a.state.editJobData._id,{title:t,location:n,dateApplied:o}).then((function(e){a._refreshJobs()})),a.setState({editJobModal:!1,editJobData:{id:"",title:"",location:"",dateApplied:""}})},a.handleDelete=function(e){z.a.delete("https://jobbing-back-end.herokuapp.com/api/v1/job/"+e,{}).then((function(e){a._refreshJobs()}))},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this._refreshJobs()}},{key:"_refreshJobs",value:function(){var e=this;z.a.get("https://jobbing-back-end.herokuapp.com/api/v1/job").then((function(t){console.log(t),e.setState({jobs:t.body})}))}},{key:"toggleNewJobModal",value:function(){this.setState({newJobModal:!this.state.newJobModal})}},{key:"toggleEditJobModal",value:function(){this.setState({editJobModal:!this.state.editJobModal})}},{key:"render",value:function(){var e=this,t=this.state.jobs.map((function(t){return o.a.createElement("tr",{key:t._id},o.a.createElement("td",null,t._id),o.a.createElement("td",null,t.title),o.a.createElement("td",null,t.location),o.a.createElement("td",null,t.dateApplied),o.a.createElement("td",null,o.a.createElement(O.a,{color:"success",size:"sm",onClick:e.editJob.bind(e,t._id,t.title,t.location,t.dateApplied)},"Edit"),o.a.createElement(O.a,{color:"danger",size:"sm",onClick:e.handleDelete.bind(e,t._id)},"Delete")))}));return o.a.createElement("div",{className:"Job container"},o.a.createElement(O.a,{color:"primary",onClick:this.toggleNewJobModal.bind(this)},"Add new Job"),o.a.createElement(A.a,{isOpen:this.state.newJobModal,toggle:this.toggleNewJobModal.bind(this)},o.a.createElement(S.a,{toggle:this.toggleNewJobModal.bind(this)},"Add a new Job"),o.a.createElement(M.a,null,o.a.createElement(x.a,null,o.a.createElement(T.a,{for:"title"},"Title"),o.a.createElement(_.a,{id:"title",value:this.state.newJobData.title,onChange:this.handleChangeTitle,placeholder:"Ex. Software Developer"})),o.a.createElement(x.a,null,o.a.createElement(T.a,{for:"location"},"Location"),o.a.createElement(_.a,{id:"location",value:this.state.newJobData.location,onChange:this.handleChangeLocation,placeholder:"Ex. Seattle"})),o.a.createElement(x.a,null,o.a.createElement(T.a,{for:"dateApplied"},"Date Applied"),o.a.createElement(_.a,{id:"dateApplied",value:this.state.newJobData.dateApplied,onChange:this.handleChangeDateApplied,placeholder:"Ex. October 2, 2019"}))),o.a.createElement(L.a,null,o.a.createElement(O.a,{color:"primary",onClick:this.addNewJob.bind(this)},"Add Job"),o.a.createElement(O.a,{color:"secondary",onClick:this.toggleNewJobModal.bind(this)},"Cancel"))),o.a.createElement(A.a,{isOpen:this.state.editJobModal,toggle:this.toggleEditJobModal.bind(this)},o.a.createElement(S.a,{toggle:this.toggleEditJobModal.bind(this)},"Edit Job"),o.a.createElement(M.a,null,o.a.createElement(x.a,null,o.a.createElement(T.a,{for:"title"},"Title"),o.a.createElement(_.a,{id:"title",value:this.state.editJobData.title,onChange:function(t){var a=e.state.editJobData;a.title=t.target.value,e.setState({editJobData:a})}})),o.a.createElement(x.a,null,o.a.createElement(T.a,{for:"location"},"Location"),o.a.createElement(_.a,{id:"location",value:this.state.editJobData.location,onChange:function(t){var a=e.state.editJobData;a.location=t.target.value,e.setState({editJobData:a})}})),o.a.createElement(x.a,null,o.a.createElement(T.a,{for:"dateApplied"},"Date Applied"),o.a.createElement(_.a,{id:"dateApplied",value:this.state.editJobData.dateApplied,onChange:function(t){var a=e.state.editJobData;a.dateApplied=t.target.value,e.setState({editJobData:a})}}))),o.a.createElement(L.a,null,o.a.createElement(O.a,{color:"primary",onClick:this.updateJob.bind(this)},"Update Job"),o.a.createElement(O.a,{color:"secondary",onClick:this.toggleEditJobModal.bind(this)},"Cancel"))),o.a.createElement(N.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Job ID"),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Location"),o.a.createElement("th",null,"Date Applied"),o.a.createElement("th",null,"Actions"))),o.a.createElement("tbody",null,t)))}}]),t}(n.Component),U=function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("h2",null,"Hello!")}}]),t}(n.Component),B=function(){return o.a.createElement(J,null,o.a.createElement(C,null),o.a.createElement(w,{capability:"read"},o.a.createElement(U,null),o.a.createElement(H,null)))},P=document.getElementById("root");i.a.render(o.a.createElement((function(){return o.a.createElement(B,null)}),null),P)}},[[113,1,2]]]);
//# sourceMappingURL=main.7626e45e.chunk.js.map